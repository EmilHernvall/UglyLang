type Greeter (name: string,
              setName: (void)(string),
              setAge: (void)(int),
              greet: (void)());

(Greeter)(string,int) createGreeter =
    (Greeter)(string name, int age) {
        return (
            name: name,
            age: age,
            setName:(void)(string v) {
                name = v;
            },
            setAge:(void)(int v) {
                age = v;
            },
            greet:(void)() {
                print("Hello " + name + "! You are " + intToStr(age) + " this year.");
            }
        );
    };

Greeter emil = createGreeter("Emil", 26);
emil.name = "Emil Hernvall";
print("name: " + emil.name);
emil.greet();

Greeter tobbe = createGreeter("Torbjörn", 52);
tobbe.greet();

Greeter[] greeters = [ emil, tobbe ];

greeters[1].name = "Torbjörn Hernvall";
greeters[0].greet();

greeters[1].setName("Torbjörn Hernvall");
greeters[1].greet();
tobbe.greet();
