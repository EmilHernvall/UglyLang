type Greeter (name: string,
              setName: (void)(string),
              setAge: (void)(int),
              greet: (void)());

(Greeter)(string,int) createGreeter =
(Greeter)(string name, int age) {
    return (
        name: name,
        age: age,
        setName:(void)(string v) {
            name = v;
        },
        setAge:(void)(int v) {
            age = v;
        },
        greet:(void)() {
            print("Hello " + name + "! You are " + intToStr(age) + " this year.");
        }
    );
};

Greeter emil = createGreeter("Emil", 26);
emil.name = "Emil Hernvall";
print("name: " + emil.name);
emil.greet();

Greeter tobbe = createGreeter("Torbjörn", 52);
tobbe.greet();

Greeter charlotta = createGreeter("Charlotta", 29);
charlotta.greet();

Greeter[] greeters = [ emil, tobbe, charlotta, createGreeter("Hannes", 23) ];

greeters[1].name = "Torbjörn Hernvall";
greeters[0].greet();

greeters[3].setName("Hannes Hernvall");
greeters[3].greet();

tobbe.greet();
